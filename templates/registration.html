<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='registration.css') }}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      $(document).ready(function () {
        // Function to validate and submit the form
        $("form").submit(function (event) {
          event.preventDefault(); // Prevent form submission
      
          var password = $("#password").val();
          var confirmPassword = $("#confirm-password").val();
      
          // Password validation which means building a strong password witha combination of letters, symbols and numbers
          var strongRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/;
          if (!strongRegex.test(password)) {
            $(".alert").html('<div class="alert alert-danger" role="alert">Password must be at least 8 characters long and contain at least one lowercase letter, one uppercase letter, one numeric digit, and one special character.</div>');
            return;
          }
      
          // Confirm password matching
          if (password !== confirmPassword) {
            $(".alert").html('<div class="alert alert-danger" role="alert">Password and Confirm Password do not match!</div>');
            return;
          }
      
          // Clear error message if passwords match
          $(".alert").html('');
      
          // Send AJAX request to register user
          $.ajax({
            type: "POST",
            url: "/register",
            data: $(this).serialize(),
            success: function (response) {
              // Display success message
              $(".alert").html('<div class="alert alert-success" role="alert">You have successfully registered your account!</div>');
      
              // Clear registration fields
              $("form")[0].reset();
            },
            error: function (err) {
              // Handle errors
              console.error("Error:", err);
            },
          });
        });
      });
      
      
    </script>
</head>
<body>
    {% include 'navbar1.html' %}
    <div class="container">
        <form action="/register" method="POST">
            <h2>Sign Up</h2>
            <div class="content">
                <div class="input-box">
                    <label for="name">Full Name</label>
                    <input type="text" placeholder="Enter your Full Name" name="name" required />
                </div>
                <div class="input-box">
                    <label for="username">Username</label>
                    <input type="text" placeholder="Enter username" name="uname" required />
                </div>
                <div class="input-box">
                    <label for="email">Email</label>
                    <input type="email" placeholder="Enter your email address" name="email" required />
                </div>
                <div class="input-box">
                    <label for="phone">Phone Number</label>
                    <input type="tel" placeholder="Enter your mobile phone number" name="phone" required />
                </div>
                <div class="input-box">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter new password" name="password" required />
                </div>
                <div class="input-box">
                    <label for="confirm-password">Confirm password</label>
                    <input type="password" id="confirm-password" placeholder="Confirm your password" name="confirmPassword" required />
                </div>
                <span class="gender-title">Gender</span>
                <div class="gender-category">
                    <input type="radio" name="gender" id="male" value="male" required />
                    <label for="male">Male</label>

                    <input type="radio" name="gender" id="female" value="female" />
                    <label for="female">Female</label>

                    <input type="radio" name="gender" id="other" value="other" />
                    <label for="other">Other</label>
                </div>
            </div>
            <div class="alert">
                <p>By clicking Sign Up, you agree to our terms and conditions. You may receive SMS notifications from us and can opt out at any time.</p>
            </div>

            <div class="button-container">
                <button>Register</button>
            </div>
        </form>
    </div>
</body>
</html>
