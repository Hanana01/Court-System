<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="UTF-8">
        <title>DCCMS - Judge</title>
        <link rel="stylesheet" href="../static/index.css">
        <!-- Boxicons -->
        <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
        <!-- Favicon -->
        <link rel="icon" href="../static/images/favicon.ico" type="image/x-icon">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <nav>
            <form action="#">
                <div class="form-input">
                    <input type="search" placeholder="Search...">
                    <button type="submit" class="search-btn"><i class='bx bx-search'></i></button>
                </div>
            </form>
            <a href="#" class="notification">
                <i class='bx bxs-bell'></i>
                <span class="num">8</span>
            </a>
        </nav>

        <div class="sidebar close">
            <div class="logo-details">
                <img class="logo" src="../static/images/myLogo1.png" alt="Logo" />
                <span class="logo-name">DCCMS</span>
            </div>
            <ul class="nav-links">
                <li>
                    <a href="/judge/dashboard">
                        <i class='bx bx-grid-alt'></i>
                        <span class="link-name">Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="/judge/view_judges">
                        <i class='bx bxs-briefcase'></i>
                        <span class="link-name">Judges</span>
                    </a>
                </li>
                <li>
                    <a href="/judge/view_lawyers">
                        <i class='bx bxs-user-circle'></i>
                        <span class="link-name">Lawyers</span>
                    </a>
                </li>
                <li>
                    <div class="icon-link">
                        <a href="#">
                            <i class='bx bxs-spreadsheet'></i>
                            <span class="link-name">My Cases</span>
                        </a>
                        <i class="bx bxs-chevron-down arrow"></i>
                    </div>
                    <ul class="sub-menu">
                        <li><a href="/judge/view_cases">View Cases</a></li>
                        <li><a href="/judge/solved_cases">Solved Cases</a></li>
                    </ul>
                </li>
                <li>
                    <a href="/judge/judge_calendar">
                        <i class='bx bxs-calendar-event'></i>
                        <span class="link-name">Calendar</span>
                    </a>
                </li>
                <li>
                    <a href="/judge/case_documents">
                        <i class='bx bxs-file'></i>
                        <span class="link-name">Case Documents</span>
                    </a>
                </li>
                <li>
                    <div class="profile-details">
                        <div class="profile-content">
                            <img src="../static/images/profile.png" alt="profile" id="profile-image">
                        </div>
                        <div class="name-job">
                            <div class="profile_name" id="profile-username">Loading...</div>
                            <div class="job" id="profile-role">Loading...</div>
                        </div>
                        <i class='bx bx-log-out logout' id="logout"></i>
                    </div>
                </li>
            </ul>
        </div>

        <main>
            <div id="content">
                <!-- Content will be loaded here -->
            </div>
        </main>

        <script>
            function loadPage(page) {
                fetch(page)
                    .then(response => response.text())
                    .then(data => {
                        document.getElementById('content').innerHTML = data;
                    })
                    .catch(error => console.error('Error loading the page:', error));
            }

           
            // Sidebar toggle logic
            const sidebar = document.querySelector('.sidebar');
            const sidebarToggle = document.querySelector('.bx-chevron-right');

            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('close');
            });
        </script>
        <script>
            function loadProfile() {
                fetch('/profile')
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'success') {
                            document.getElementById('profile-username').textContent = data.data.username;
                            document.getElementById('profile-role').textContent = data.data.role;
                        } else {
                            console.error('Error fetching profile information:', data.message);
                        }
                    })
                    .catch(error => {
                        console.error('Error loading profile:', error);
                    });
            }
        
            // Call the function when the page loads
            document.addEventListener('DOMContentLoaded', function() {
                loadProfile();
            });
        </script>
    </body>
</html>
